---
title: "Tuna Catch Graph"
author: "Conner Smith"
date: "6/15/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(here)

```

## List of all Tuna stocks 

ALBAIO (Done)
ALBAMED (Done)
ALBANATL (Done)
ALBANPAC (Done)
ALBASATL (Done)
ALBASPAC (Done)
ATBTUNAEATL
ATBTUNAWATL
BIGEYEATL (Done)
BIGEYECWPAC (Done)
BIGEYEEPAC (Done)
BIGEYEIO (Done)
PACBTUNA
SBT (Done)
SKJCIO
SKJCWPAC
SKJEATL
SKJEPAC
SKJWATL
YFINATL
YFINCWPAC
YFINEIO
YFINEPAC


## SBT Catch (RAM + New)

```{r}

sbt_ram <- read_csv(here("data", "sbt_timeseries_2016.csv")) %>% 
  select(stockid, year, TCbest) %>% 
  rename(catch = TCbest)

# create dataframe of new catch values 
new_yr_sbt <- c(2017:2020)
new_tc_sbt <- c(13700,17100,16900,16441)

new_catch_sbt <- data.frame(new_yr_sbt, new_tc_sbt) %>%
  rename(year = new_yr_sbt,
         catch = new_tc_sbt) 

#Bind the new rows
sbt_combined <- bind_rows(sbt_ram, new_catch_sbt) %>% 
  filter(year %in% c(1950:2020)) %>% 
  replace_na(list(stockid = "SBT"))

# Now have SBT catch through 2020 

```

## ALBAIO Catch

```{r}
albaio_catch <- read_csv(here("data", "albaio_catch.csv")) %>% 
  filter(year %in% c(1950:2020)) %>% 
  select(year, catch) 

albaio_stock_code <- c("ALBAIO")

albaio_combined <- cbind(albaio_stock_code, albaio_catch) %>% 
  rename(stockid = albaio_stock_code)
```


## ALBAMED Catch

```{r}
albamed_catch <- read_csv(here("data", "albamed_catch.csv")) %>% 
  filter(year %in% c(1950:2020)) %>% 
  select(year, catch) 

albamed_stock_code <- c("ALBAMED")

albamed_combined <- cbind(albamed_stock_code, albamed_catch) %>% 
  rename(stockid = albamed_stock_code)
  
```
## ALBANATL (Ends in 2016)

```{r}
albanatl_combined <- read_csv(here("data", "albanatl_catch.csv")) %>% 
  filter(year %in% c(1950:2020)) %>% 
  rename(catch = TCbest)
```

## ALBASATL (Ends in 2016)

```{r}
albasatl_combined <- read_csv(here("data", "albasatl_catch.csv")) %>% 
  filter(year %in% c(1950:2020)) %>% 
  rename(catch = TCbest)
```

## ALBANPAC Catch

```{r}
albanpac_catch <- read_csv(here("data", "albanpac_catch.csv")) %>% 
  filter(year %in% c(1950:2020)) %>% 
  select(year, catch) 

albanpac_stock_code <- c("ALBANPAC")

albanpac_combined <- cbind(albanpac_stock_code, albanpac_catch) %>% 
  rename(stockid = albanpac_stock_code)
  
```

# ALBASPAC Catch

```{r}
albaspac_combined <- read_csv(here("data", "albaspac_catch.csv")) %>% 
  filter(year %in% c(1950:2020))
```

## BIGEYEATL

```{r}
bigeyeatl_combined <- read_csv(here("data", "bigeyeatl_catch.csv")) %>% 
  filter(year %in% c(1950:2020)) %>% 
  rename(catch = TCbest)
```

## BIGEYECWPAC

```{r}
bigeyecwpac_combined <- read_csv(here("data", "bigeyecwpac_catch.csv")) %>% 
  filter(year %in% c(1950:2020))
```
## BIGEYEEPAC (Ends in 2016)

```{r}
bigeyeepac_combined <- read_csv(here("data", "bigeyeepac_catch.csv")) %>% 
  filter(year %in% c(1950:2020)) %>% 
  rename(catch = TCbest) 
```

## BIGEYEIO

```{r}
bigeyeio_combined <- read_csv(here("data", "bigeyeio_catch.csv")) %>% 
  filter(year %in% c(1950:2020)) %>% 
  select(stockid, year, catch) 
```


## MASTER DF GOES HERE 

```{r}

# Run all chunks below before this 

tuna_catch <- data.frame(sbt_combined) %>% 
  bind_rows(albaio_combined,
            albamed_combined,
            albanatl_combined,
            albasatl_combined,
            albanpac_combined,
            albaspac_combined,
            bigeyeatl_combined,
            bigeyecwpac_combined,
            bigeyeepac_combined,
            bigeyeio_combined)
  
```


## MASTER GRAPH GOES HERE

```{r}
ggplot(tuna_catch, aes(x = year, y = catch, fill = stockid)) +
  geom_area() +
  labs(x = "Year", y = "Catch (metric tonnes)") +
  theme_minimal()
```